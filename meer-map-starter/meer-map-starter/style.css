:root{
  --meer-blue:#0077c8;
  --meer-blue-dark:#004a87;
  --bg:#f6f8fb;
  --text:#1f2a44;
  --muted:#6b778c;
  --panel:#ffffff;
  --border:#e6e9ef;
  --shadow: 0 8px 24px rgba(0,0,0,0.08);
  --focus: rgba(0,119,200,.18);
}

*{box-sizing:border-box;}

html,body{
  margin:0;
  padding:0;
  height:100%;
  font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Inter, Arial, sans-serif;
  color:var(--text);
  background:radial-gradient(circle at top, #e8f3ff 0, #f6f8fb 45%, #eef2f8 100%);
}

a{
  color:var(--meer-blue);
  text-decoration:none;
}
a:hover{ text-decoration:underline; }
a:focus-visible,
button:focus-visible,
input:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:2px;
  border-radius:6px;
}

/* ===== Header / Layout ===== */

.site-header{
  padding:18px 20px 16px;
  background:linear-gradient(135deg, var(--meer-blue) 0%, var(--meer-blue-dark) 100%);
  color:#fff;
  text-align:center;
  box-shadow:0 4px 16px rgba(0,0,0,0.18);
}
.site-header h1{
  margin:0;
  letter-spacing:0.04em;
  text-transform:uppercase;
  font-size:1.05rem;
}
.site-header .subtitle{
  opacity:.9;
  margin:.35rem 0 0;
  font-size:.9rem;
}

.map-layout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:16px;
  padding:16px;
  height:calc(100vh - 110px);
  max-width:1200px;
  margin:0 auto;
}

/* ===== Controls Sidebar ===== */

.controls{
  position:relative;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px 14px 18px;
  box-shadow: var(--shadow);
  overflow:auto;
}

/* subtle sidebar header strip */
.controls::before{
  content:"Project Filters";
  display:block;
  font-size:12px;
  font-weight:600;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--muted);
  padding:4px 2px 10px;
  border-bottom:1px solid var(--border);
  margin:0 0 8px;
}

.control-group{
  margin-bottom:14px;
  padding-bottom:10px;
  border-bottom:1px dashed rgba(230,233,239,0.8);
}
.control-group:last-of-type{
  border-bottom:none;
  padding-bottom:0;
}
.group-title{
  font-weight:600;
  font-size:13px;
  display:block;
  margin-bottom:8px;
  color:var(--text);
}

/* Search */
#searchInput{
  width:100%;
  padding:9px 11px;
  border:1px solid var(--border);
  border-radius:10px;
  outline:none;
  background:#fff;
  font-size:14px;
}
#searchInput::placeholder{
  color:#9aa3b8;
}
#searchInput:focus{
  border-color: var(--meer-blue);
  box-shadow:0 0 0 3px var(--focus);
}

/* Checkbox filters */
.checkboxes label{
  display:flex;
  align-items:center;
  gap:8px;
  margin:5px 0;
  font-size:13px;
  color:var(--text);
  padding:4px 6px;
  border-radius:8px;
  transition:background .15s ease, box-shadow .15s ease;
  cursor:pointer;
}
.checkboxes label:hover{
  background:#f4f7fc;
  box-shadow:0 0 0 1px rgba(0,0,0,0.02);
}
.checkboxes input{
  accent-color: var(--meer-blue);
}

/* Buttons */
.btn{
  background:var(--meer-blue);
  color:#fff;
  border:none;
  padding:10px 12px;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
  font-size:13px;
  width:100%;
  transition:transform .13s ease, box-shadow .13s ease, filter .13s ease;
}
.btn:hover{
  filter:brightness(.97);
  box-shadow:0 4px 10px rgba(0,119,200,0.2);
  transform:translateY(-1px);
}
.btn:active{
  transform:translateY(0);
  box-shadow:none;
}

/* Legend */
.legend{
  margin-top:4px;
  padding-top:8px;
  border-top:1px solid var(--border);
  font-size:13px;
  color:var(--muted);
}
.legend-title{
  font-weight:700;
  color:var(--text);
  margin-bottom:6px;
}
.legend-item{
  display:flex;
  align-items:center;
  gap:8px;
  margin:4px 0;
}
.dot{
  width:12px;
  height:12px;
  border-radius:50%;
  display:inline-block;
  border:2px solid #fff;
  box-shadow:0 0 0 1px var(--border);
}
.dot.lab{   background:#8a2be2; }  /* Laboratory & Testing */
.dot.field{ background:#22a06b; }  /* Field Research / Agricultural */
.dot.water{ background:#2d9cdb; }  /* Ecological & Water */
.dot.data{  background:#f2994a; }  /* Data & Modelling */
.dot.hub{   background:#e63946; }  /* Coordination & Training Hub */

/* ===== Map ===== */

#map{
  width:100%;
  height:100%;
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow: var(--shadow);
  overflow:hidden;
  background:#dde3f0;
  transition:box-shadow .15s ease, transform .15s ease;
}
#map:hover{
  box-shadow:0 12px 30px rgba(0,0,0,0.14);
  transform:translateY(-1px);
}

/* Marker hover effect (divIcon) */
.meer-marker .dot{
  transition:transform .15s ease, box-shadow .15s ease;
}
.meer-marker:hover .dot{
  transform:scale(1.3);
  box-shadow:0 0 0 2px rgba(0,119,200,0.2);
}

/* ===== Leaflet Popups ===== */

.leaflet-popup-content-wrapper{
  border-radius:12px;
  box-shadow: var(--shadow);
  border:1px solid rgba(0,0,0,0.04);
}
.leaflet-popup-tip{
  border-top-color:#fff;
}
.leaflet-popup-content{
  margin:12px 16px;
  max-height:260px;
  overflow-y:auto;
}

/* custom scrollbar inside popups & sidebar (mostly WebKit/Chromium) */
.leaflet-popup-content::-webkit-scrollbar,
.controls::-webkit-scrollbar{
  width:6px;
}
.leaflet-popup-content::-webkit-scrollbar-track,
.controls::-webkit-scrollbar-track{
  background:transparent;
}
.leaflet-popup-content::-webkit-scrollbar-thumb,
.controls::-webkit-scrollbar-thumb{
  background:#c7d2e5;
  border-radius:999px;
}

.popup{
  max-width:280px;
}
.popup .title{
  font-weight:800;
  color:var(--meer-blue);
  margin:0 0 6px 0;
}
.popup .meta{
  font-size:12px;
  color:var(--muted);
  margin-bottom:5px;
}
.popup img{
  width:100%;
  height:140px;
  object-fit:cover;
  border-radius:8px;
  margin:8px 0;
}
.popup .desc{
  font-size:14px;
  line-height:1.45;
  margin:6px 0 10px;
}
.popup a.button{
  display:inline-block;
  background:var(--meer-blue);
  color:#fff;
  text-decoration:none;
  padding:8px 12px;
  border-radius:999px;
  font-weight:700;
  font-size:13px;
  margin-top:4px;
}
.popup a.button:hover{
  filter:brightness(.96);
}

/* optional badge class if you move inline style from JS */
.badge-warn{
  display:inline-block;
  background:#fff3cd;
  color:#946200;
  border:1px solid #ffe69c;
  padding:2px 6px;
  border-radius:6px;
  font-size:12px;
  margin-bottom:6px;
}

/* ===== Footer ===== */

.site-footer{
  text-align:center;
  padding:10px 16px 14px;
  color:var(--muted);
  font-size:12px;
}

/* ===== Project Details Page (project.html) ===== */

.proj-wrap{
  max-width:960px;
  margin:24px auto 40px;
  padding:0 16px;
}
.proj-header{
  margin:0 0 6px;
  font-size:1.6rem;
}
.proj-meta{
  color:#555;
  font-size:14px;
  margin-bottom:12px;
}
.proj-badge{
  display:inline-block;
  background:#eef6ff;
  border:1px solid #cfe2ff;
  color:#084298;
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
  margin:0 6px 6px 0;
}
.section{
  margin-bottom:12px;
}

.proj-body{
  line-height:1.6;
  margin:16px 0 24px;
  font-size:15px;
}

.gallery{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-bottom:16px;
}
.gallery img{
  width:280px;
  height:180px;
  object-fit:cover;
  border-radius:8px;
  border:1px solid var(--border);
}

.video-wrap{
  margin:16px 0;
}
.video-wrap iframe{
  width:100%;
  height:420px;
  border:0;
  border-radius:8px;
  box-shadow: var(--shadow);
}

.back{
  margin:24px 0 0;
  display:inline-block;
  color:var(--meer-blue-dark);
  text-decoration:underline;
  font-size:14px;
}
.button{
  display:inline-block;
  background:var(--meer-blue);
  color:#fff;
  padding:10px 14px;
  border-radius:999px;
  text-decoration:none;
  font-weight:600;
  font-size:14px;
}
.button:hover{
  filter:brightness(.95);
}

/* Small polish */
.leaflet-container a{ color:var(--meer-blue); }

/* ===== Responsive ===== */

@media (max-width: 992px){
  .map-layout{
    grid-template-columns: 1fr;
    height:auto;
    padding:12px;
  }
  #map{
    height:70vh;
  }
  .controls{
    max-height:40vh;
  }
  .gallery img{
    width:100%;
    height:auto;
  }
}

@media (max-width: 600px){
  .site-header h1{
    font-size:.95rem;
  }
  .site-header .subtitle{
    font-size:.8rem;
  }
}

